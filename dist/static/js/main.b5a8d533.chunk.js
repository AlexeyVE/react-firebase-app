(this["webpackJsonpreact-firebase-app"]=this["webpackJsonpreact-firebase-app"]||[]).push([[0],{215:function(e,t,a){e.exports=a(410)},409:function(e,t,a){},410:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(83),l=a.n(c),i=a(214),o=a(9),s=a(209),u=a(210),m=a(85),d=a.n(m);a(220),a(223);d.a.initializeApp({apiKey:"AIzaSyA16SuIti0zCJUkjXm8IIHfLsKiz1LXnK0",authDomain:"planner-b84c0.firebaseapp.com",databaseURL:"https://planner-b84c0.firebaseio.com",projectId:"planner-b84c0",storageBucket:"planner-b84c0.appspot.com",messagingSenderId:"216147532009",appId:"1:216147532009:web:a378b6d6aa6d0b1bd67878",measurementId:"G-QS5PMM04VS"}),d.a.firestore();var p=d.a,E=a(14),f=a(34),h=a(35),b={authError:null},g={projects:[]},v=Object(o.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_ERROR":return Object(h.a)({},e,{authError:"Login failed. "+t.err});case"LOGIN_SUCCESS":return console.log("Login success"),Object(h.a)({},e,{authError:null});case"SIGN_OUT":return console.log("Sign out success"),e;case"SIGN_UP_SUCCESS":return console.log("signup success"),Object(h.a)({},e,{authError:null});case"SIGNUP_ERROR":return Object(h.a)({},e,{authError:"Sign up failed. "+t.err});default:return e}},project:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_PROJECT":return console.log("create project",t.payload),e;case"CREATE_PROJECT_ERROR":return console.log("create project error",t.err),e;default:return e}},firebase:E.firebaseReducer,firestore:f.firestoreReducer}),N=(Object(s.createLogger)(),[]);N=[u.a.withExtraArgument({getFirebase:E.getFirebase,getFirestore:f.getFirestore})];var j=Object(o.e)(v,Object(o.d)(o.a.apply(void 0,Object(i.a)(N)),Object(f.reduxFirestore)(p))),O=a(5),y=a(24),w=function(e){return{auth:e.firebase.auth}},R=function(e){return Object(O.b)(w)((function(t){var a=Object.assign({},t);return a.auth.uid?n.a.createElement(e,a):n.a.createElement(y.a,{to:"/signin"})}))},S=a(7),C=Object(O.b)(null,{signOut:function(){return function(e,t,a){var r=(0,a.getFirebase)();return r.auth().signOut().then((function(){r.logout(),e({type:"SIGN_OUT"})}))}}})((function(e){var t=e.profile;return n.a.createElement("ul",{className:"right"},n.a.createElement("li",null,n.a.createElement(S.c,{to:"/create-project"},"\u041d\u043e\u0432\u044b\u0439 \u043f\u0440\u043e\u0435\u043a\u0442")),n.a.createElement("li",null,n.a.createElement("a",{href:"/",onClick:e.signOut},"\u0412\u044b\u0439\u0442\u0438")),n.a.createElement("li",null,n.a.createElement(S.c,{to:"/",className:"btn btn-floating  orange lighten-1 "},t.initials)))})),F=function(e){return n.a.createElement("ul",{className:"right"},n.a.createElement("li",null,n.a.createElement(S.c,{to:"/signup"},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f")),n.a.createElement("li",null,n.a.createElement(S.c,{to:"/signin"},"\u0412\u043e\u0439\u0442\u0438")))},x=Object(O.b)((function(e){return{auth:e.firebase.auth,profile:e.firebase.profile}}))((function(e){var t=e.auth,a=e.profile,r=t.uid?n.a.createElement(C,{profile:a}):n.a.createElement(F,null);return n.a.createElement("nav",{className:"nav-wrapper grey darken-3"},n.a.createElement("div",{className:"container"},n.a.createElement(S.b,{to:"/",className:"brand-logo"},"\u041f\u043b\u0430\u043d\u0438\u0440\u043e\u0432\u0449\u0438\u043a"),r))})),I=a(33),_=a.n(I),L=(a(131),function(e){var t=e.notifications;return n.a.createElement("div",{className:"section"},n.a.createElement("div",{className:"card z-depth-0 border light-blue lighten-5"},n.a.createElement("div",{className:"card-content"},n.a.createElement("span",{className:"card-title"},"\u0423\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f"),n.a.createElement("ul",{className:"notification"},t&&t.map((function(e){return n.a.createElement("li",{className:"",key:e.id},n.a.createElement("span",{className:"orange-text"}," ",e.user," "),n.a.createElement("span",null," ",e.content," "),n.a.createElement("div",{className:"grey-text note-date"},_()(e.time.toDate()).calendar()))}))))))}),P=function(e){var t=e.project;return n.a.createElement("div",{className:"card z-depth-0 project-summary border light-blue lighten-5"},n.a.createElement("div",{className:"card-content grey-text text-darken-3"},n.a.createElement("span",{className:"project-title"},t.title),n.a.createElement("p",null,"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043e: ",t.authorFirstName," ",t.authorLastName),n.a.createElement("p",{className:"grey-text"},_()(t.createAt.toDate()).calendar())))},k=function(e){var t=e.projects;return n.a.createElement("div",{className:"project-list section"},t&&t.map((function(e){return n.a.createElement(S.b,{to:"/project/"+e.id,key:e.id},n.a.createElement(P,{project:e}))})))},A=Object(o.d)(Object(O.b)((function(e){return{projects:e.firestore.ordered.projects,notifications:e.firestore.ordered.notifications}})),Object(E.firestoreConnect)([{collection:"projects",orderBy:["createAt","desc"]},{collection:"notifications",limit:3,orderBy:["time","desc"]}]),R)((function(e){var t=e.projects,a=e.notifications;return n.a.createElement("div",{className:"dashboard container"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col s12 m6"},n.a.createElement(k,{projects:t})),n.a.createElement("div",{className:"col s12 m5 offset-m1"},n.a.createElement(L,{notifications:a}))))})),U=Object(o.d)(Object(O.b)((function(e,t){var a=t.match.params.id,r=e.firestore.data.projects;return{project:r?r[a]:null}})),Object(E.firestoreConnect)([{collection:"projects"}]),R)((function(e){var t=e.project;return t?n.a.createElement("div",{className:"container section project-details"},n.a.createElement("div",{className:"card z-depth-0 border light-blue lighten-5"},n.a.createElement("div",{className:"card-content"},n.a.createElement("span",{className:"card-title"},t.title),n.a.createElement("p",null," ",t.content," ")),n.a.createElement("div",{className:"card-action grey lighten-4 grey-text"},n.a.createElement("div",null,"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043e: ",t.authorFirstName," ",t.authorLastName),n.a.createElement("div",null,_()(t.createAt.toDate()).calendar())))):n.a.createElement("div",{className:"container center"},"Loading project.....")})),z=a(135),G=a.n(z),T=a(213),D=a(45),J=Object(O.b)((function(e){return{authError:e.auth.authError,auth:e.firebase.auth}}),{signIn:function(e){return function(t,a,r){return(0,r.getFirebase)().auth().signInWithEmailAndPassword(e.email,e.password).then((function(){return t({type:"LOGIN_SUCCESS"})})).catch((function(e){return t(function(e){return{type:"LOGIN_ERROR",err:e}}(e.message))}))}}})((function(e){var t=e.signIn,a=e.authError,c=e.auth,l=Object(r.useState)({}),i=Object(D.a)(l,2),o=i[0],s=i[1];s=function(e){o[e.target.id]=e.target.value};var u=function(){var e=Object(T.a)(G.a.mark((function e(a){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.preventDefault(),t(o);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return c.uid?n.a.createElement(y.a,{to:"/"}):n.a.createElement("div",{className:"container"},n.a.createElement("form",{onSubmit:u,className:"white"},n.a.createElement("h5",{className:"grey-text text-darken-3"},"\u0412\u043e\u0439\u0442\u0438"),n.a.createElement("div",{className:"input-field"},n.a.createElement("label",{htmlFor:"email"},"\u041f\u043e\u0447\u0442\u0430"),n.a.createElement("input",{type:"email",id:"email",onChange:s})),n.a.createElement("div",{className:"input-field"},n.a.createElement("label",{htmlFor:"password"},"\u041f\u0430\u0440\u043e\u043b\u044c"),n.a.createElement("input",{type:"password",id:"password",onChange:s})),n.a.createElement("div",{className:"input-field"},n.a.createElement("button",{className:"waves-effect waves-light btn btn orange lighten-1 z-depth-0"},"\u0412\u0445\u043e\u0434"))),n.a.createElement("div",{className:"red-text center"},a?n.a.createElement("p",null,a):null))})),B=Object(O.b)((function(e){return{authError:e.auth.authError,auth:e.firebase.auth}}),{signUp:function(e){return function(t,a,r){var n=r.getFirebase,c=r.getFirestore,l=n(),i=c();return l.auth().createUserWithEmailAndPassword(e.email,e.password).then((function(a){return i.collection("users").doc(a.user.uid).set({firstName:e.firstName,lastName:e.lastName,initials:e.firstName[0]+e.lastName[0]}).then((function(){return t({type:"SIGN_UP_SUCCESS"})})).catch((function(e){return t(function(e){return{type:"SIGNUP_ERROR",err:e}}(e.message))}))}))}}})((function(e){var t=e.auth,a=e.signUp,c=e.authError,l=Object(r.useState)({}),i=Object(D.a)(l,2),o=i[0],s=i[1];s=function(e){o[e.target.id]=e.target.value};return t.uid?n.a.createElement(y.a,{to:"/"}):n.a.createElement("div",{className:"container"},n.a.createElement("form",{onSubmit:function(e){e.preventDefault(),a(o)},className:"white"},n.a.createElement("h5",{className:"grey-text text-darken-3"},"\u0417\u0430\u0440\u0435\u0433\u0435\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"),n.a.createElement("div",{className:"input-field"},n.a.createElement("label",{htmlFor:"firstName"},"\u0418\u043c\u044f"),n.a.createElement("input",{type:"text",id:"firstName",onChange:s})),n.a.createElement("div",{className:"input-field"},n.a.createElement("label",{htmlFor:"lastName"},"\u0424\u0430\u043c\u0438\u043b\u0438\u044f"),n.a.createElement("input",{type:"text",id:"lastName",onChange:s})),n.a.createElement("div",{className:"input-field"},n.a.createElement("label",{htmlFor:"email"},"\u041f\u043e\u0447\u0442\u0430"),n.a.createElement("input",{type:"email",id:"email",onChange:s})),n.a.createElement("div",{className:"input-field"},n.a.createElement("label",{htmlFor:"password"},"\u041f\u0430\u0440\u043e\u043b\u044c"),n.a.createElement("input",{type:"password",id:"password",onChange:s})),n.a.createElement("div",{className:"input-field"},n.a.createElement("button",{className:"waves-effect waves-light btn btn orange lighten-1 z-depth-0"},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"))),n.a.createElement("div",{className:"red-text center"},c?n.a.createElement("p",null,c):null))})),W=Object(o.d)(Object(O.b)(null,{createProject:function(e){return function(t,a,r){r.getFirebase;var n=(0,r.getFirestore)(),c=a().firebase.profile,l=a().firebase.auth.uid;return n.collection("projects").add(Object(h.a)({},e,{authorFirstName:c.firstName,authorLastName:c.lastName,authorId:l,createAt:new Date})).then((function(){return t(function(e){return{type:"CREATE_PROJECT",project:e}}(e))})).catch((function(e){return t(function(e){return{type:"CREATE_PROJECT_ERROR",err:e}}(e))}))}}}),R)((function(e){var t=e.createProject,a=e.history,c=Object(r.useState)({}),l=Object(D.a)(c,2),i=l[0],o=l[1];o=function(e){i[e.target.id]=e.target.value};return n.a.createElement("div",{className:"container"},n.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t(i),a.push("/")},className:"white"},n.a.createElement("h5",{className:"grey-text text-darken-3"},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u043e\u0432\u044b\u0439 \u043f\u0440\u043e\u0435\u043a\u0442"),n.a.createElement("div",{className:"input-field"},n.a.createElement("label",{htmlFor:"title"},"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430"),n.a.createElement("input",{type:"text",id:"title",onChange:o})),n.a.createElement("div",{className:"input-field"},n.a.createElement("label",{htmlFor:"content"},"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430"),n.a.createElement("textarea",{id:"content",className:"materialize-textarea",onChange:o})),n.a.createElement("div",{className:"input-field"},n.a.createElement("button",{className:"waves-effect waves-light btn btn orange lighten-1 z-depth-0"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"))))})),K=function(){return n.a.createElement("div",{className:"not-found center"},n.a.createElement("h1",null,"404 - \u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"))},M=function(e){return n.a.createElement(S.a,null,n.a.createElement("div",{className:"App"},n.a.createElement(x,null),n.a.createElement(y.d,null,n.a.createElement(y.b,{exact:!0,path:"/",component:A}),n.a.createElement(y.b,{path:"/project/:id",component:U}),n.a.createElement(y.b,{path:"/signin",component:J}),n.a.createElement(y.b,{path:"/signup",component:B}),n.a.createElement(y.b,{path:"/create-project",component:W}),n.a.createElement(y.b,{component:K}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(409);var X={firebase:p,config:{userProfile:"users",useFirestoreForProfile:!0},dispatch:j.dispatch,createFirestoreInstance:f.createFirestoreInstance};l.a.render(n.a.createElement(O.a,{store:j},n.a.createElement(E.ReactReduxFirebaseProvider,X,n.a.createElement((function(e){var t=e.children,a=Object(O.c)((function(e){return e.firebase.auth}));return Object(E.isLoaded)(a)?t:n.a.createElement("div",{className:"app-preloader"},"Loading...")}),null,n.a.createElement(M,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[215,1,2]]]);
//# sourceMappingURL=main.b5a8d533.chunk.js.map